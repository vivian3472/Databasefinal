
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- If IE use the latest rendering engine -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Set the page to the width of the device and set the zoon level -->
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <title>NYU Community - Notifications</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<!--    <link href="footer.css" rel="stylesheet">-->
</head>
<body>
<!-- Header: Navbar -->
<div class="header"></div>
<!--
<script>
<?php
session_start();
$var_value = $_SESSION['username'];
?>
    
<p>Your name: <?php echo $_SESSION['username'] ?></p>
</script>
-->
<script>
    var id=/id=([^&]+)/i.exec(location.search);
    if(id)id=id[1];else id='';
    //alert(id);
</script>
    
<!-- Body: Container -->
<div class="container-fluid">
    <!-- ROW  -->
    <div class="row">
        <!-- Left pannel: Empty  -->
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <div class="container-fluid">
            </div>
        </div><!-- END of Left pannel  -->

        <!-- Right pannel: News  -->
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <h4 style = "color: #000">Notifications</h4>
            <div class="container-fluid invt-List" id="invt-List"></div>
    	</div><!-- END of Right pannel  -->
        
        <!-- Right pannel: Empty  -->
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <div class="container-fluid">
            </div>
        </div><!-- END of Right pannel  -->
    </div><!-- END of ROW -->
</div><!-- END of Body: Container -->  

<!-- Footer -->
<div class="footer"></div>

<!-- SCRIPT -->
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function(){ $('.header').load("header.html"); });
    $(document).ready(function(){ $('.footer').load("footer.html"); });
</script>
    
<script>
    var data_ntfn;
    var iname = id;
    function renderList(data) {
        console.log(data);
        var selection = d3.select("#invt-List").selectAll("li")
            .data(data, function (d) {
                return d.Invitor;
            });
        selection.enter()
            .append("li")
            .attr("class", "well")
            .html(function(d) {
                return '<div class="row"><div class="col-xs-8"><p>Invitor: '+d.Invitor+'</p></div><div class="col-xs-2"><a href="" onclick="acptRq()"><p>Accept</p></a></div><div class="col-xs-2"><a href="" onclick="ignrRq()"><p>Ignore</p></a></div></div>'
            })
            
        selection.exit().remove();
    }
    d3.json('http://localhost:8888/dbfinal/api/invite/'+iname, function (error, data) {
        data_ntfn = data;
        renderList(data_ntfn);
    })
    function getposts(theUrl, callbackFunction){
        $.ajax(
        {
            url: theUrl,
            type: 'GET',
            dataType: 'json',
            accept: 'application/json',
            success: function(data)
            {  
                console.log(data);
                if(typeof callbackFunction == 'function')
                {
                    callbackFunction.call(this, data);
                }
//                console.log(data[0].PostId);
            }
        });
    }
    getposts("http://localhost:8888/dbfinal/api/invite/"+iname, function(data_ntfn){
//        alert("allow");
    });
</script>
<style>
    .invt-List li {
        list-style: none; 
        margin-bottom: 10px;
        margin-left: 0px;
        margin-right: 20px;
        box-shadow: inset 2px 2px 1px rgba(0,0,0,.05),2px 2px 1px rgba(0,0,0,.05);
        font-size: 16px;

    }
    #invt-List {
        margin-left: 0;
        padding-right: 20px;
        margin-right: 10px;
        padding-left: 0;
    }
</style>
</body>
</html>
